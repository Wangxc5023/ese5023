<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Section 11 Python environments</title>

<script src="site_libs/header-attrs-2.24/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Computing and Programming for Environmental Research</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="Syllabus.html">
    <span class="fa fa-bell-o"></span>
     
    Syllabus
  </a>
</li>
<li>
  <a href="Schedule.html">
    <span class="fa fa-calendar"></span>
     
    Schedule
  </a>
</li>
<li>
  <a href="Resource.html">
    <span class="fa fa-wrench"></span>
     
    Resource
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-laptop"></span>
     
    Assignments
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Assignment_01.html">Assignment 01</a>
    </li>
    <li>
      <a href="Assignment_02.html">Assignment 02</a>
    </li>
    <li>
      <a href="Assignment_03.html">Assignment 03</a>
    </li>
    <li>
      <a href="Assignment_04.html">Assignment 04</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Section 11 Python environments</h1>

</div>


<blockquote>
<p>“Your code is the product of your environment.” - Robert Sandor</p>
</blockquote>
<hr />
<div id="python-environments" class="section level1">
<h1><code>Python</code> environments</h1>
<p><code>Python</code> and nearly all of the software packages in the
scientific <code>Python</code> ecosystem are
<strong>open-source</strong>. They are maintained and developed by a
community of scientists and programmers, some of whose work is supported
by universities, non-profits, and for-profit corporations. Because there
is no single authority that controls all of these packages, coordinating
the compatibility between these different packages and their multiple
versions used to be a nightmare.</p>
<p>Sometimes when we create software, the software needs to run on a
<strong>specific version</strong> of <code>Python</code> because our
software expects a certain behavior that is present in older versions
but changes in newer versions. Likewise, we may need to use specific
versions of the libraries for similar reasons. But we may have many
projects on our computer, perhaps a project that runs on with
<code>xarray</code> version <code>0.1</code> and <code>Python 2.7</code>
and even a more modern project that runs on <code>xarray</code> version
<code>0.8</code> and <code>Python 3.8</code>. If we try running both at
once on <code>Python 2.7</code> or <code>Python 3.8</code>, one of them
may break because some of the code that runs on <code>Python 2</code>
doesn’t run on <code>Python 3</code> or vice versa. This is where
virtual <strong>environments</strong> become useful.</p>
<p>Virtual environments keep these dependencies in separate “sandboxes”
so you can switch between both applications easily and get them running.
<code>Python</code> environments take care of most of the dependencies
and modules for us, but we will have to get our hands dirty in
<code>Python</code> and deal with the environments.</p>
<p>In this section, we will learn how to use <code>conda</code> to
manage a <code>Python</code> environment (“sandbox”) we play in.</p>
<p><img src="figs/sandbox.png" alt="drawing" width="600"/></p>
<p><a
href="https://miro.medium.com/max/544/1*IwZIB3XSOyfAf3DXK5jmEA.png">Figure
source</a></p>
<div id="creating-a-python-environment" class="section level2">
<h2>Creating a <code>Python</code> environment</h2>
<p><code>Python</code> coupled with a package manager provides a way to
make isolated, reproducible environments where you have fine-tuned
control overall packages and configuration. From now on, you are highly
recommended to work within an environment, rather than the “default”
environment.</p>
<p>To see all the environments on your system, type the following in
<code>Anaconda Powershell Prompt</code>:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">conda</span> info <span class="at">--envs</span></span></code></pre></div>
<p>This command should display the current environments, with
<code>*</code> marking the environment you are in.</p>
<p>To quickly create an environment (called <code>cper</code>, standing
for <em>Computing and Programming for Environmental Research</em>) using
<code>conda</code>, type the following in
<code>Anaconda Powershell Prompt</code>:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">conda</span> create <span class="at">--name</span> cper python=3.8.8</span></code></pre></div>
<p>In this command, the <code>python=3.8.8</code> portion specifies
which version of <code>Python</code> you want to set up the environment
in; you can change the version to whatever suits your needs. Here
<code>--name</code> sets the name of the environment. In other snippets
you see online, you may see <code>--n</code> instead of
<code>--name</code>; they mean exactly the same thing.</p>
<p>Now display the current environments with
<code>conda info --envs</code>, you will something like this:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">base</span>                   <span class="pp">*</span> C:<span class="dt">\U</span>sers<span class="dt">\8</span>6133<span class="dt">\a</span>naconda3</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">cper</span>                     C:<span class="dt">\U</span>sers<span class="dt">\8</span>6133<span class="dt">\a</span>naconda3<span class="dt">\e</span>nvs<span class="dt">\c</span>per</span></code></pre></div>
</div>
<div id="using-a-python-environment" class="section level2">
<h2>Using a <code>Python</code> environment</h2>
<p>After confirming that you created the environment, let’s now actually
use it. We can accomplish this by typing:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">conda</span> activate cper</span></code></pre></div>
<p>At this point, your terminal prompt should look something like
this:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">cper</span><span class="kw">)</span> <span class="ex">PS</span> C:<span class="dt">\U</span>sers<span class="dt">\8</span>6133<span class="op">&gt;</span></span></code></pre></div>
<p>Now display the current environments with
<code>conda info --envs</code>, you will something like this:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">base</span>                     C:<span class="dt">\U</span>sers<span class="dt">\8</span>6133<span class="dt">\a</span>naconda3</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="ex">cper</span>                   <span class="pp">*</span> C:<span class="dt">\U</span>sers<span class="dt">\8</span>6133<span class="dt">\a</span>naconda3<span class="dt">\e</span>nvs<span class="dt">\c</span>per</span></code></pre></div>
<p>The <code>*</code> indicates that we are in the <code>cper</code>
environment.</p>
<p>To get a complete summary of all the packages installed in an
environment, the channel they were installed from, and their full
version info, type:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">conda</span> list</span></code></pre></div>
<p>To stop using the <code>cper</code> environment, type in:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">conda</span> deactivate cper</span></code></pre></div>
</div>
<div id="installing-modules-under-a-python-environment"
class="section level2">
<h2>Installing modules under a <code>Python</code> environment</h2>
<p>Once you have a basic <code>Python</code> environment, you can easily
add or remove modules using the <code>conda</code> command-line utility.
<code>Conda</code> was created to help manage the complex dependencies
and pre-compiled binary libraries that are necessary in scientific
python. If you set up your python environment using the
<code>Anaconda</code> Python Distribution or with
<code>miniconda</code>, you should already have the <code>conda</code>
command available on the command line. With it, you can easily install
modules from an official, curated set of packages which are built and
tested for a number of different system configurations on Linux,
Windows, and macOS.</p>
<p>To install a module (say <code>XXXX</code>), first activate the
environment (say <code>cper</code>) under which you would like to
install it:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">conda</span> activate cper</span></code></pre></div>
<p>Then type:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">conda</span> install XXXX</span></code></pre></div>
<p>Additionally, there is a community-maintained collection of
packages/recipes called <a href="https://conda-forge.org/">conda
forge</a> which is accessible through <code>conda</code> as a special
“channel”:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">conda</span> install <span class="at">-c</span> conda-forge XXXX</span></code></pre></div>
<p>While <code>conda</code> allows you to install almost any
science-related package, there may be other general-use python packages
you wish to you that are not available via <code>conda</code>. For
these, you can use an alternative installation method.</p>
<p>Outside of the scientific python community, the most common way to
install packages is to search for them on the <a
href="https://pypi.org/">official <code>PyPI</code> index</a>. Once
you’ve found the package you want to install (you may have also just
found it on Github or elsewhere), you use the <code>pip</code> command
from the command line:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">pip</span> install XXXX</span></code></pre></div>
<p>If you can’t find a package on either <code>PyPI</code> or
<code>conda-forge</code>, you can always install it directly from the
source code. If the package is on <code>github</code>, <code>pip</code>
already has an alias to do this for you:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">pip</span> install git+https://github.com/.../XXXX.git</span></code></pre></div>
<p>Where <code>https://github.com/.../XXXX.git</code> indicates the url
of the module.</p>
<p>Now let’s install some modules under the <code>cper</code>
environment. Make sure you have activated the <code>cper</code>
environment; otherwise, modules will be installed under the
<code>base</code> environment.</p>
<p>First, we will install modules via <code>conda</code>:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">conda</span> install numpy pandas matplotlib netCDF4 xarray notebook cartopy dask python-graphviz</span></code></pre></div>
<p>Later, we use <code>pip</code> to install a module via a different
channel:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">pip</span> install nc-time-axis</span></code></pre></div>
<p>Now use <code>conda list</code> to verify that we have successfully
installed the above modules.</p>
</div>
<div id="using-the-environment-file" class="section level2">
<h2>Using the environment file</h2>
<p>As you type <code>conda list</code>, you get a complete summary of
all the modules installed in your environment, the channel they were
installed from, and their full version info. Using this info, you are
able to create an environment file in <a
href="https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html"><code>YAML</code>
syntax</a> (YAML Ain’t Markup Language) which documents the exact
contents of your environment.</p>
<p>To export your current environment (<code>cper</code>) to a
<code>yml</code> file (<code>my_environment.yml</code>):</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">conda</span> env export <span class="at">--name</span> cper <span class="op">&gt;</span> my_environment.yml</span></code></pre></div>
<p>The <code>&gt;</code> indicates that the output is writing to a file
called <code>my_environment.yml</code>. If there were any contents in
<code>my_environment.yml</code> before this command, they would be
overwritten. Now in your working directory, a file
<code>my_environment.yml</code> was just created, open it, you will see
a list of configurations of the <code>cper</code> environment.</p>
<p>The environment file (<code>my_environment.yml</code>) is very
useful, as it allows creating an <strong>identical</strong> environment.
You can use different environment files for different projects, or share
an environment file with someone to grantee <strong>reproducible
research</strong>.</p>
<p>To create a new environment (say <code>cper_new</code>) through
existing environment file (say <code>ZZZZ.yml</code>), go to the folder
that contains this environment file, type:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">conda</span> env create <span class="at">--name</span> cper_new <span class="at">--file</span> ZZZZ.yml</span></code></pre></div>
</div>
<div id="packaging-a-conda-environment" class="section level2">
<h2>Packaging a conda environment</h2>
<p>If you want to copy the environment, you may want to use
<code>conda-pack</code> that allows you to package your entire
environment as a compressed file (a <code>tar.gz</code>) you can just
copy and paste somewhere, and it just works.</p>
<p>Pack your environment:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">conda</span> pack</span></code></pre></div>
<p>It can take some minutes depending on the size of the environment and
the number of libraries installed. Move the compressed file to the
destination, Uncompress the environment in the folder, then Run:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">conda-unpack</span> </span></code></pre></div>
<p>to re-create symlinks and set everything up. Check <a
href="https://www.anaconda.com/blog/moving-conda-environments">Moving
Conda Environments</a> for more.</p>
</div>
<div id="removing-a-conda-environment" class="section level2">
<h2>Removing a conda environment</h2>
<p>If you would like to get rid of the entire <code>cper</code>
environment, deactivate it then type in:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">conda</span> remove <span class="at">--name</span> cper <span class="at">--all</span></span></code></pre></div>
<p>The <code>--all</code> flag is to remove all packages from the
environment and is necessary to completely clean the environment.</p>
<p>For extensive documentation on using environments, please see the <a
href="https://conda.io/projects/conda/en/latest/user-guide/concepts/environments.html">conda
documentation</a>.</p>
<hr />
<p><em>The notes are modified from the excellent <a
href="https://rabernat.github.io/research_computing_2018/python-environments.html">Python
Environments</a>, and <a
href="https://towardsdatascience.com/getting-started-with-python-environments-using-conda-32e9f2779307">Getting
started with Python environments (using Conda)</a>, all available freely
online.</em></p>
<hr />
</div>
</div>
<div id="in-class-exercises" class="section level1">
<h1>In-class exercises</h1>
<div id="exercise-1" class="section level2">
<h2>Exercise #1</h2>
<p>Go through the notes, make sure you understand the scripts.</p>
<hr />
</div>
</div>
<div id="further-reading" class="section level1">
<h1>Further reading</h1>
<ul>
<li><a
href="https://conda.io/projects/conda/en/latest/_downloads/843d9e0198f2a193a3484886fa28163c/conda-cheatsheet.pdf">Conda
Cheat sheet</a></li>
<li><a
href="https://carpentries-incubator.github.io/introduction-to-conda-for-data-scientists/04-sharing-environments/index.html">Sharing
Environments</a></li>
<li><a
href="https://conda.io/projects/conda/en/latest/user-guide/getting-started.html">Getting
started with conda</a></li>
</ul>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = false;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
