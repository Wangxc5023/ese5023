<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Section 02 R Basics</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 66px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h2 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h3 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h4 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h5 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h6 {
  padding-top: 71px;
  margin-top: -71px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Computing and Programming for Environmental Research</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="Syllabus.html">
    <span class="fa fa-bell-o"></span>
     
    Syllabus
  </a>
</li>
<li>
  <a href="Schedule.html">
    <span class="fa fa-calendar"></span>
     
    Schedule
  </a>
</li>
<li>
  <a href="Resource.html">
    <span class="fa fa-wrench"></span>
     
    Resource
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-laptop"></span>
     
    Assignments
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Assignment_01.html">Assignment 01</a>
    </li>
    <li>
      <a href="Assignment_02.html">Assignment 02</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Section 02 R Basics</h1>

</div>


<blockquote>
<p>R is a dialect of the S language, and has come to be — by far — the dominant dialect. <a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
</blockquote>
<div id="why-r" class="section level1">
<h1>Why R?</h1>
<p>R is the leading tool for statistics, data analysis, and machine learning. It is more than a statistical package; it’s a <strong><em>programming language</em></strong>, so you can create your own objects, functions, and packages. <a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<p>Academics and statisticians have developed R over two decades. R now has one of the richest ecosystems to perform data analysis. There are around <strong><em>16000 packages</em></strong> available in CRAN (<a href="https://cran.r-project.org/">Comprehensive R Archive Network</a>). It is possible to find a library for <strong><em>whatever the analysis</em></strong> you want to perform. The rich variety of libraries makes R the first choice for statistical and data analysis. R also makes communicating the findings with a presentation, document, or website very easy. <a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<p>The following figure <a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> summaries important reasons for learning R:</p>
<p><img src="figs/learn_R.png" alt="drawing" width="600"/></p>
<hr />
</div>
<div id="first-look-at-rstudio" class="section level1">
<h1>First look at RStudio</h1>
<p>Follow <a href="https://zhu-group.github.io/ese5023/Resource.html#RStudio_Desktop">instructions</a> to install RStudio.</p>
<p>The RStudio IDE (Integrated Development Environment) is the most popular integrated development environment for R. It allows you to write, run, and debug your R code. <img src="figs/RStudio.jpg" alt="drawing" width="800"/></p>
<p>Check this <a href="https://github.com/rstudio/cheatsheets/raw/master/rstudio-ide.pdf">cheat sheet</a> for more features and shortcuts of the RStudio IDE.</p>
<hr />
<p><em>The notes below are modified from the excellent <a href="http://swcarpentry.github.io/r-novice-gapminder/">online R tutorial</a> freely available on the Software Carpentry website.</em></p>
<hr />
</div>
<div id="introduction-to-r" class="section level1">
<h1>Introduction to R</h1>
<div id="using-r-as-a-calculator" class="section level2">
<h2>Using R as a calculator</h2>
<p>The simplest thing you could do with R is to do arithmetic. Let try this in the <strong>Console</strong> window:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>R will print out the answer with a preceding <code>## [1]</code> (my PC) or <code>[1]</code> (your laptop). Don’t worry about this for now, we’ll explain that later. For now, think of it as indicating output.</p>
<p>You will find the spaces have no impact on the result.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="dv">1</span><span class="op">+</span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>When using R as a calculator, the order of operations is the same as you would have learned back in school. From highest to lowest precedence:</p>
<ul>
<li>Parentheses: <code>(</code>, <code>)</code></li>
<li>Exponents: <code>^</code> or <code>**</code></li>
<li>Multiply: <code>*</code></li>
<li>Divide: <code>/</code></li>
<li>Add: <code>+</code></li>
<li>Subtract: <code>-</code></li>
</ul>
<p>Let’s try</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">3</span></a></code></pre></div>
<pre><code>## [1] 7</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span>) <span class="op">*</span><span class="st"> </span><span class="dv">3</span></a></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span>) <span class="op">^</span><span class="st"> </span><span class="dv">3</span></a></code></pre></div>
<pre><code>## [1] 27</code></pre>
<p>Always think about clarifying your intentions, as others may later read your code. Here we call such intentions as “comments”. Anything that follows after the hash symbol <code>#</code> is ignored by R when it executes code.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># Get the square root of 100</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="dv">100</span> <span class="op">^</span><span class="st"> </span><span class="fl">0.5</span></a></code></pre></div>
<pre><code>## [1] 10</code></pre>
<p>Really small or large numbers get a <em>scientific notation</em>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="dv">2</span> <span class="op">/</span><span class="st"> </span><span class="dv">10000</span></a></code></pre></div>
<pre><code>## [1] 2e-04</code></pre>
<p>You can write numbers in scientific notation too:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="fl">5e+5</span> <span class="op">*</span><span class="st"> </span><span class="fl">1e+5</span></a></code></pre></div>
<pre><code>## [1] 5e+10</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="fl">5.2E+5</span> <span class="op">+</span><span class="st"> </span><span class="fl">4.8E+6</span></a></code></pre></div>
<pre><code>## [1] 5320000</code></pre>
</div>
<div id="mathematical-functions" class="section level2">
<h2>Mathematical functions</h2>
<p>R has many built-in mathematical functions. To call a function, we can type its name, followed by open and closing parentheses <code>()</code>. Anything we type inside the parentheses is called the function’s <em>arguments</em>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># Trigonometry functions</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="kw">sin</span>(<span class="dv">1</span>)</a></code></pre></div>
<pre><code>## [1] 0.841471</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">sin</span>(<span class="fl">0.5</span><span class="op">*</span>pi)</a></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="co"># Natural logarithm</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="kw">log</span>(<span class="dv">10</span>)</a></code></pre></div>
<pre><code>## [1] 2.302585</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="co"># Base-10 logarithm</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="kw">log10</span>(<span class="dv">10</span>)</a></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="co"># e^(1/2)</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="kw">exp</span>(<span class="fl">0.5</span>)</a></code></pre></div>
<pre><code>## [1] 1.648721</code></pre>
<p>Don’t worry about trying to remember every function in R. You can look them up online, or if you can remember the start of the function’s name, use the <code>Tab</code> completion in RStudio.</p>
<p>This is one advantage that RStudio has over R on its own; it has <em>auto-completion abilities</em> that allow you to more easily look up functions, their arguments, and the values that they take. In fact, the auto-completion abilities do not limit to functions, but also to variables.</p>
<p>Typing a <code>?</code> before the name of a command will open the help page for that command. When using RStudio, this will open the <strong>Help</strong> window. The help page will include a detailed description of the command and how it works. Scrolling to the bottom of the help page will usually show a collection of code examples that illustrate command usage. We will go back to how to get help later in this section.</p>
</div>
<div id="comparing-things" class="section level2">
<h2>Comparing things</h2>
<p>We can also do comparisons in R:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="co"># Equality (note two equals signs, read as &quot;is equal to&quot;)</span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="dv">1</span> <span class="op">==</span><span class="st"> </span><span class="dv">1</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="co"># Inequality (read as &quot;is not equal to&quot;)</span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2"><span class="dv">3</span> <span class="op">!=</span><span class="st"> </span><span class="dv">2</span>  </a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="co"># Less than</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="dv">100</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">101</span>  </a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="co"># Less than or equal to</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="fl">1e3</span> <span class="op">&lt;=</span><span class="st"> </span><span class="fl">2e3</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="co"># Greater than</span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2"><span class="dv">1</span><span class="op">/</span><span class="dv">3</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">5</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="co"># Greater than or equal to</span></a>
<a class="sourceLine" id="cb39-2" data-line-number="2"><span class="dv">-100</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">-200</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>A word of warning about comparing numbers: you should never use <code>==</code> to compare two numbers unless they are integers (a data type which can specifically represent only whole numbers).</p>
<p>Computers may only represent decimal numbers with a certain degree of precision, so two numbers which look the same when printed out by R, may actually have different underlying representations and therefore be different by a small margin of error (called Machine numeric tolerance). <a href="http://floating-point-gui.de">Further reading</a></p>
<p>Instead, you should use the <code>all.equal()</code> function.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1"><span class="co"># Comparing</span></a>
<a class="sourceLine" id="cb41-2" data-line-number="2"><span class="kw">all.equal</span>(<span class="dv">1</span>, <span class="dv">1</span>)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1"><span class="kw">all.equal</span>(<span class="dv">1</span>, <span class="dv">1</span><span class="fl">+1e-5</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Mean relative difference: 1e-05&quot;</code></pre>
</div>
<div id="variables-and-assignment" class="section level2">
<h2>Variables and assignment</h2>
<p>We can store values in variables using the assignment operator <code>&lt;-</code>, like this:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1"><span class="co"># Assignment</span></a>
<a class="sourceLine" id="cb45-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">100</span></a></code></pre></div>
<p>Notice that the assignment does not print a value. Instead, we stored it for later in something called a <em>variable</em>. <code>x</code> now contains the value <code>0.01</code>:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1"><span class="co"># Print x</span></a>
<a class="sourceLine" id="cb46-2" data-line-number="2">x</a></code></pre></div>
<pre><code>## [1] 0.01</code></pre>
<p>Remember, you can always print a variable (in fact, anything) using the function <code>print()</code>:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>## [1] 0.01</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1"><span class="kw">print</span>(<span class="st">&quot;Hello World&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Hello World&quot;</code></pre>
<p>You can also assign a character to a variable</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1">MyName &lt;-<span class="st"> &quot;SUSTech&quot;</span></a>
<a class="sourceLine" id="cb52-2" data-line-number="2"><span class="kw">print</span>(MyName)</a></code></pre></div>
<pre><code>## [1] &quot;SUSTech&quot;</code></pre>
<p>Look for the <strong>Environment</strong> window from the top right panel of RStudio, and you will see that <code>x</code> and its value have appeared. Our variable <code>x</code> can be used in place of a number in any calculation that expects a number:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1"><span class="co"># Print x</span></a>
<a class="sourceLine" id="cb54-2" data-line-number="2"><span class="kw">log10</span>(x)</a></code></pre></div>
<pre><code>## [1] -2</code></pre>
<p>Notice also that variables can be reassigned:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1"><span class="co"># Assignment</span></a>
<a class="sourceLine" id="cb56-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="dv">100</span></a></code></pre></div>
<p><code>x</code> used to contain the value <code>0.01</code>, and now it has the value <code>100</code>.</p>
<p>Assignment values can contain the variable being assigned to:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1"><span class="co"># Notice how RStudio updates its description of x on the top right tab</span></a>
<a class="sourceLine" id="cb57-2" data-line-number="2">x &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="dv">1</span> </a>
<a class="sourceLine" id="cb57-3" data-line-number="3">y &lt;-<span class="st"> </span>x <span class="op">*</span><span class="st"> </span><span class="dv">2</span></a></code></pre></div>
<p>The right-hand side of the assignment can be any valid R expression. The right-hand side is <strong>fully evaluated</strong> before the assignment occurs.</p>
<p>Variable names can contain letters, numbers, underscores, periods, <strong>but no spaces</strong>. They must start with a letter or a period followed by a letter (they cannot start with a number nor an underscore). Variables beginning with a period are hidden variables. Different people use different conventions for long variable names. Whatever you use is up to you, but be consistent.</p>
</div>
<div id="vectorization" class="section level2">
<h2>Vectorization</h2>
<p>One thing to be aware of is that R is <em>vectorized</em>, meaning that variables and functions can have vectors as values. In contrast to physics and mathematics, a vector in R describes a set of values <strong>in a certain order</strong> of the same data type. For example:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1"><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1"><span class="dv">2</span> <span class="op">^</span><span class="st"> </span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a></code></pre></div>
<pre><code>##  [1]    2    4    8   16   32   64  128  256  512 1024</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb62-2" data-line-number="2"><span class="dv">2</span> <span class="op">^</span><span class="st"> </span>x</a></code></pre></div>
<pre><code>##  [1]    2    4    8   16   32   64  128  256  512 1024</code></pre>
<p>This is incredibly powerful; we will discuss this further in an upcoming section.</p>
</div>
<div id="managing-your-environment" class="section level2">
<h2>Managing your environment</h2>
<p>There are a few useful commands you can use to interact with the R session.</p>
<p><code>ls()</code> will list all of the variables and functions stored in the global environment (your working R session):</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1"><span class="kw">ls</span>()</a></code></pre></div>
<pre><code>## [1] &quot;MyName&quot;     &quot;Results&quot;    &quot;Simulation&quot; &quot;TotalDraw&quot;  &quot;x&quot;          &quot;y&quot;</code></pre>
<p>Note here that we didn’t give any arguments to <code>ls()</code>, but we still needed to give the parentheses <code>()</code> to tell R to call the function.</p>
<p>You can use <code>rm()</code> to delete objects you no longer need:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1"><span class="kw">rm</span>(x)</a>
<a class="sourceLine" id="cb66-2" data-line-number="2"><span class="kw">ls</span>()</a></code></pre></div>
<pre><code>## [1] &quot;MyName&quot;     &quot;Results&quot;    &quot;Simulation&quot; &quot;TotalDraw&quot;  &quot;y&quot;</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1"><span class="kw">rm</span>(MyName, y)</a>
<a class="sourceLine" id="cb68-2" data-line-number="2"><span class="kw">ls</span>()</a></code></pre></div>
<pre><code>## [1] &quot;Results&quot;    &quot;Simulation&quot; &quot;TotalDraw&quot;</code></pre>
</div>
<div id="conditional-statements" class="section level2">
<h2>Conditional statements</h2>
<p>Often when we’re coding, we want to control the flow of our actions. This can be done by setting actions to occur only if a condition or a set of conditions are met. Alternatively, we can also set an action to occur a particular number of times.</p>
<p>There are several ways you can control flow in R. For conditional statements, the most commonly used approaches are the <code>if</code> and <code>else</code> constructs.</p>
<p>Given today’s AQI (Air Quality Index) value, suppose we want to write a piece of code to check whether the Air Quality is excellent (AQI &lt;= <code>50</code>) or not.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1">AQI &lt;-<span class="st"> </span><span class="dv">69</span></a></code></pre></div>
<p>Open a new R script (<code>File -&gt; New File -&gt; R Script</code>), and you should see a new panel in your RStudio. Type the following lines in the script, and save it. Select the lines you want to run, there are two ways to do so:</p>
<ul>
<li>Type <code>Ctrl</code>+<code>Enter</code></li>
<li>Click <code>Run</code> then <code>Run Select Line(s)</code> from the top-right of the <strong>Script</strong> window.</li>
</ul>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1">AQI &lt;-<span class="st"> </span><span class="dv">69</span></a>
<a class="sourceLine" id="cb71-2" data-line-number="2"><span class="co"># If this condition is TRUE</span></a>
<a class="sourceLine" id="cb71-3" data-line-number="3"><span class="cf">if</span> (AQI <span class="op">&lt;=</span><span class="st"> </span><span class="dv">50</span>) { </a>
<a class="sourceLine" id="cb71-4" data-line-number="4">  <span class="co"># Do the following</span></a>
<a class="sourceLine" id="cb71-5" data-line-number="5">  <span class="kw">print</span>(<span class="st">&quot;Air Quality is Excellent&quot;</span>)</a>
<a class="sourceLine" id="cb71-6" data-line-number="6">}</a></code></pre></div>
<p>The print statement does not appear in the <strong>console</strong> because <code>AQI</code> is larger than <code>50</code>. To print a different message for numbers larger than <code>50</code>, we can add an else statement.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1"><span class="co"># If this condition is TRUE</span></a>
<a class="sourceLine" id="cb72-2" data-line-number="2"><span class="cf">if</span> (AQI <span class="op">&lt;=</span><span class="st"> </span><span class="dv">50</span>) {</a>
<a class="sourceLine" id="cb72-3" data-line-number="3">  <span class="co"># Do the following</span></a>
<a class="sourceLine" id="cb72-4" data-line-number="4">  <span class="kw">print</span>(<span class="st">&quot;Air Quality is Excellent&quot;</span>)</a>
<a class="sourceLine" id="cb72-5" data-line-number="5"><span class="co"># If this condition is FALSE  </span></a>
<a class="sourceLine" id="cb72-6" data-line-number="6">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb72-7" data-line-number="7">  <span class="kw">print</span>(<span class="st">&quot;Air Quality is NOT Excellent&quot;</span>)</a>
<a class="sourceLine" id="cb72-8" data-line-number="8">}</a></code></pre></div>
<pre><code>## [1] &quot;Air Quality is NOT Excellent&quot;</code></pre>
<p>You can also test multiple conditions by using <code>else if</code>.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1"><span class="cf">if</span> (AQI <span class="op">&lt;=</span><span class="st"> </span><span class="dv">50</span>) {</a>
<a class="sourceLine" id="cb74-2" data-line-number="2">  <span class="kw">print</span>(<span class="st">&quot;Air Quality is Excellent&quot;</span>)</a>
<a class="sourceLine" id="cb74-3" data-line-number="3">} <span class="cf">else</span> <span class="cf">if</span> (AQI <span class="op">&lt;=</span><span class="st"> </span><span class="dv">100</span>) {</a>
<a class="sourceLine" id="cb74-4" data-line-number="4">  <span class="kw">print</span>(<span class="st">&quot;Air Quality is GOOD&quot;</span>)</a>
<a class="sourceLine" id="cb74-5" data-line-number="5">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb74-6" data-line-number="6">  <span class="kw">print</span>(<span class="st">&quot;Air Pollution!&quot;</span>)</a>
<a class="sourceLine" id="cb74-7" data-line-number="7">}</a></code></pre></div>
<pre><code>## [1] &quot;Air Quality is GOOD&quot;</code></pre>
<p>Change <code>AQI</code> to <code>40</code>, <code>80</code>, and <code>120</code>, check the ouput.</p>
<p><strong>Important</strong>: when R evaluates the condition inside <code>if()</code> statements, it is looking for a logical element, <em>i.e.</em>, <code>TRUE</code> or <code>FALSE</code>. This can cause some headaches for beginners. For example:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1">x  &lt;-<span class="st">  </span><span class="dv">4</span> <span class="op">==</span><span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb76-2" data-line-number="2"><span class="cf">if</span> (x) {</a>
<a class="sourceLine" id="cb76-3" data-line-number="3">  <span class="st">&quot;4 equals 3&quot;</span></a>
<a class="sourceLine" id="cb76-4" data-line-number="4">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb76-5" data-line-number="5">  <span class="st">&quot;4 does not equal 3&quot;</span>          </a>
<a class="sourceLine" id="cb76-6" data-line-number="6">}</a></code></pre></div>
<pre><code>## [1] &quot;4 does not equal 3&quot;</code></pre>
<p>We can use logical AND <code>&amp;&amp;</code> and OR <code>||</code> operator for more than one condition:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1"><span class="cf">if</span> (AQI <span class="op">&gt;</span><span class="st"> </span><span class="dv">50</span> <span class="op">&amp;&amp;</span><span class="st"> </span>AQI <span class="op">&lt;=</span><span class="st"> </span><span class="dv">100</span>) {</a>
<a class="sourceLine" id="cb78-2" data-line-number="2">  <span class="kw">print</span>(<span class="st">&quot;Air Quality is Good&quot;</span>)</a>
<a class="sourceLine" id="cb78-3" data-line-number="3">}</a></code></pre></div>
<pre><code>## [1] &quot;Air Quality is Good&quot;</code></pre>
<p>Change <code>AQI</code> to <code>40</code>, <code>80</code>, and <code>120</code>, check the ouput.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" data-line-number="1">AQI1 &lt;-<span class="st"> </span><span class="dv">69</span></a>
<a class="sourceLine" id="cb80-2" data-line-number="2">AQI2 &lt;-<span class="st"> </span><span class="dv">140</span></a>
<a class="sourceLine" id="cb80-3" data-line-number="3"></a>
<a class="sourceLine" id="cb80-4" data-line-number="4"><span class="cf">if</span> (AQI1 <span class="op">&lt;=</span><span class="st"> </span><span class="dv">100</span> <span class="op">||</span><span class="st"> </span>AQI2 <span class="op">&lt;=</span><span class="st"> </span><span class="dv">100</span>) {</a>
<a class="sourceLine" id="cb80-5" data-line-number="5">  <span class="kw">print</span>(<span class="st">&quot;There is at least 1 site with a GOOD air quality&quot;</span>)</a>
<a class="sourceLine" id="cb80-6" data-line-number="6">}</a></code></pre></div>
<pre><code>## [1] &quot;There is at least 1 site with a GOOD air quality&quot;</code></pre>
<p>Change <code>AQI1</code> to <code>40</code>, <code>80</code>, and <code>120</code>, check the ouput.</p>
</div>
<div id="defining-a-function" class="section level2">
<h2>Defining a Function</h2>
<p>You probably have realized it’s really tedious to change the AQI variables. It would be really helpful to define a <em>function</em> that handles different inputs automatically.</p>
<p>A function is a set of statements organized together to perform a specific task. R has a large number of in-built functions and the user can create their own functions. In R, a function is an object so the R interpreter is able to pass control to the function, along with arguments that may be necessary for the function to accomplish the actions. The function in turn performs its task and returns control to the interpreter as well as any result which may be stored in other objects.</p>
<p>An R function is created by using the keyword <strong>function</strong>. The basic syntax of an R function definition is as follows:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1">function_name &lt;-<span class="st"> </span><span class="cf">function</span>(argument_<span class="dv">1</span>, argument_<span class="dv">2</span>, ...) {</a>
<a class="sourceLine" id="cb82-2" data-line-number="2">   Function body </a>
<a class="sourceLine" id="cb82-3" data-line-number="3">}</a></code></pre></div>
<p>In the above AQI example, we can define a function named <code>Check_Air_Quality</code> as:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" data-line-number="1">Check_Air_Quality&lt;-<span class="st"> </span><span class="cf">function</span>(AQI) {</a>
<a class="sourceLine" id="cb83-2" data-line-number="2">  <span class="co">#  Excellent </span></a>
<a class="sourceLine" id="cb83-3" data-line-number="3">  <span class="cf">if</span> (AQI <span class="op">&lt;=</span><span class="st"> </span><span class="dv">50</span>) {</a>
<a class="sourceLine" id="cb83-4" data-line-number="4">    <span class="kw">print</span>(<span class="st">&quot;Air Quality is Excellent&quot;</span>)</a>
<a class="sourceLine" id="cb83-5" data-line-number="5">  }</a>
<a class="sourceLine" id="cb83-6" data-line-number="6">  <span class="co"># Good</span></a>
<a class="sourceLine" id="cb83-7" data-line-number="7">  <span class="cf">if</span> (AQI <span class="op">&gt;</span><span class="st"> </span><span class="dv">50</span> <span class="op">&amp;&amp;</span><span class="st"> </span>AQI <span class="op">&lt;=</span><span class="st"> </span><span class="dv">100</span>) {</a>
<a class="sourceLine" id="cb83-8" data-line-number="8">    <span class="kw">print</span>(<span class="st">&quot;Air Quality is Good&quot;</span>)</a>
<a class="sourceLine" id="cb83-9" data-line-number="9">  }</a>
<a class="sourceLine" id="cb83-10" data-line-number="10">  <span class="co"># Polluted, Level I</span></a>
<a class="sourceLine" id="cb83-11" data-line-number="11">  <span class="cf">if</span> (AQI <span class="op">&gt;</span><span class="st"> </span><span class="dv">100</span> <span class="op">&amp;&amp;</span><span class="st"> </span>AQI <span class="op">&lt;=</span><span class="st"> </span><span class="dv">150</span>) {</a>
<a class="sourceLine" id="cb83-12" data-line-number="12">    <span class="kw">print</span>(<span class="st">&quot;Air pollution, level I&quot;</span>)</a>
<a class="sourceLine" id="cb83-13" data-line-number="13">  }  </a>
<a class="sourceLine" id="cb83-14" data-line-number="14">  <span class="co"># Polluted, Level II</span></a>
<a class="sourceLine" id="cb83-15" data-line-number="15">  <span class="cf">if</span> (AQI <span class="op">&gt;</span><span class="st"> </span><span class="dv">150</span> <span class="op">&amp;&amp;</span><span class="st"> </span>AQI <span class="op">&lt;=</span><span class="st"> </span><span class="dv">200</span>) {</a>
<a class="sourceLine" id="cb83-16" data-line-number="16">    <span class="kw">print</span>(<span class="st">&quot;Air pollution, level II&quot;</span>)</a>
<a class="sourceLine" id="cb83-17" data-line-number="17">  }  </a>
<a class="sourceLine" id="cb83-18" data-line-number="18">  <span class="co"># Polluted, Level III</span></a>
<a class="sourceLine" id="cb83-19" data-line-number="19">  <span class="cf">if</span> (AQI <span class="op">&gt;</span><span class="st"> </span><span class="dv">200</span> <span class="op">&amp;&amp;</span><span class="st"> </span>AQI <span class="op">&lt;=</span><span class="st"> </span><span class="dv">300</span>) {</a>
<a class="sourceLine" id="cb83-20" data-line-number="20">    <span class="kw">print</span>(<span class="st">&quot;Air pollution, level III&quot;</span>)</a>
<a class="sourceLine" id="cb83-21" data-line-number="21">  }  </a>
<a class="sourceLine" id="cb83-22" data-line-number="22">  <span class="co"># Polluted, Level IV</span></a>
<a class="sourceLine" id="cb83-23" data-line-number="23">  <span class="cf">if</span> (AQI <span class="op">&gt;</span><span class="st"> </span><span class="dv">300</span>) {</a>
<a class="sourceLine" id="cb83-24" data-line-number="24">    <span class="kw">print</span>(<span class="st">&quot;Air pollution, level IV&quot;</span>)</a>
<a class="sourceLine" id="cb83-25" data-line-number="25">  }  </a>
<a class="sourceLine" id="cb83-26" data-line-number="26">}</a></code></pre></div>
<p>Call <code>Check_Air_Quality</code> with various <code>AQI</code> values: <code>40</code>, <code>80</code>, <code>120</code>, <code>160</code>, <code>240</code>, and <code>340</code>:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" data-line-number="1"><span class="kw">Check_Air_Quality</span>(<span class="dv">40</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Air Quality is Excellent&quot;</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" data-line-number="1"><span class="kw">Check_Air_Quality</span>(<span class="dv">80</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Air Quality is Good&quot;</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" data-line-number="1"><span class="kw">Check_Air_Quality</span>(<span class="dv">120</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Air pollution, level I&quot;</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" data-line-number="1"><span class="kw">Check_Air_Quality</span>(<span class="dv">160</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Air pollution, level II&quot;</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1"><span class="kw">Check_Air_Quality</span>(<span class="dv">240</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Air pollution, level III&quot;</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" data-line-number="1"><span class="kw">Check_Air_Quality</span>(<span class="dv">500</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Air pollution, level IV&quot;</code></pre>
</div>
<div id="repeating-operations" class="section level2">
<h2>Repeating operations</h2>
<p>If you want to iterate over a set of values, when the order of iteration is important, and perform the same operation on each, a <code>for()</code> loop will do the job. This is the <strong>most flexible</strong> of looping operations, but therefore also the <strong>hardest</strong> to use correctly.</p>
<p>In general, the advice of many R users would be to learn about <code>for()</code> loops but to avoid using <code>for()</code> loops unless the order of iteration is important: <em>i.e.</em>, the calculation at each iteration depends on the results of previous iterations.</p>
<p>Let’s define a list <code>Forecast_List</code>, which contains daily mean temperature forecasts in 5 days in Shenzhen:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" data-line-number="1">Forecast_List &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">28</span>, <span class="dv">27</span>, <span class="dv">28</span>, <span class="dv">26</span>, <span class="dv">27</span>)</a></code></pre></div>
<p>Here <code>c()</code> means “combine”:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" data-line-number="1"><span class="kw">print</span>(Forecast_List)</a></code></pre></div>
<pre><code>## [1] 28 27 28 26 27</code></pre>
<p>Now loop each element in <code>Forecast_List</code>:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" data-line-number="1"><span class="cf">for</span> (Daily_T <span class="cf">in</span> Forecast_List) { <span class="co"># If this condition is TRUE</span></a>
<a class="sourceLine" id="cb99-2" data-line-number="2">  <span class="co"># Do following</span></a>
<a class="sourceLine" id="cb99-3" data-line-number="3">  <span class="kw">print</span>(Daily_T)</a>
<a class="sourceLine" id="cb99-4" data-line-number="4">} <span class="co"># End of the for loop</span></a></code></pre></div>
<pre><code>## [1] 28
## [1] 27
## [1] 28
## [1] 26
## [1] 27</code></pre>
<p>We can use a <code>for()</code> loop nested within another <code>for()</code> loop to iterate over two things at once.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" data-line-number="1"><span class="cf">for</span> (Daily_T <span class="cf">in</span> Forecast_List) {</a>
<a class="sourceLine" id="cb101-2" data-line-number="2">  <span class="cf">for</span> (Hour <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">24</span>) {</a>
<a class="sourceLine" id="cb101-3" data-line-number="3">    Hourly_T &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1</span>,Daily_T,<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb101-4" data-line-number="4">    <span class="kw">print</span>(<span class="kw">paste</span>(Daily_T,Hourly_T))</a>
<a class="sourceLine" id="cb101-5" data-line-number="5">  }</a>
<a class="sourceLine" id="cb101-6" data-line-number="6">}</a></code></pre></div>
<pre><code>## [1] &quot;28 29.1619478689067&quot;
## [1] &quot;28 27.0241005069745&quot;
## [1] &quot;28 33.5278604560085&quot;
## [1] &quot;28 28.6888174597098&quot;
## [1] &quot;28 29.4034775471991&quot;
## [1] &quot;28 35.3249933479802&quot;
## [1] &quot;28 29.2129249636999&quot;
## [1] &quot;28 28.3435605601076&quot;
## [1] &quot;28 18.8936000659402&quot;
## [1] &quot;28 34.1059410361554&quot;
## [1] &quot;28 23.9375935943361&quot;
## [1] &quot;28 30.5574317345966&quot;
## [1] &quot;28 25.2500300271459&quot;
## [1] &quot;28 19.9067143253426&quot;
## [1] &quot;28 29.2762280279057&quot;
## [1] &quot;28 29.4155535715331&quot;
## [1] &quot;28 27.7005707952397&quot;
## [1] &quot;28 22.0390655267233&quot;
## [1] &quot;28 25.931142332748&quot;
## [1] &quot;28 31.4828970415906&quot;
## [1] &quot;28 32.300214880429&quot;
## [1] &quot;28 32.9933457576794&quot;
## [1] &quot;28 24.5829943908024&quot;
## [1] &quot;28 28.935785580813&quot;
## [1] &quot;27 30.3314119341348&quot;
## [1] &quot;27 30.5761149849796&quot;
## [1] &quot;27 25.7426562690222&quot;
## [1] &quot;27 18.9491144199051&quot;
## [1] &quot;27 31.6008536962096&quot;
## [1] &quot;27 33.679851863616&quot;
## [1] &quot;27 25.1094839507622&quot;
## [1] &quot;27 25.3753903367342&quot;
## [1] &quot;27 23.5787748393343&quot;
## [1] &quot;27 23.7133361568932&quot;
## [1] &quot;27 20.7729865955217&quot;
## [1] &quot;27 22.8881848230063&quot;
## [1] &quot;27 24.6059246198073&quot;
## [1] &quot;27 28.1062208687433&quot;
## [1] &quot;27 24.8113382668674&quot;
## [1] &quot;27 23.6807036706695&quot;
## [1] &quot;27 27.3492751265113&quot;
## [1] &quot;27 28.4138790920317&quot;
## [1] &quot;27 24.8470425980567&quot;
## [1] &quot;27 31.2927574944224&quot;
## [1] &quot;27 33.93058206268&quot;
## [1] &quot;27 36.9019389925122&quot;
## [1] &quot;27 24.516148122521&quot;
## [1] &quot;27 23.2072935670811&quot;
## [1] &quot;28 30.3804370285578&quot;
## [1] &quot;28 26.60856454987&quot;
## [1] &quot;28 35.165314986501&quot;
## [1] &quot;28 20.6531601233303&quot;
## [1] &quot;28 24.593852895503&quot;
## [1] &quot;28 24.130058670316&quot;
## [1] &quot;28 29.773259080746&quot;
## [1] &quot;28 27.5160461026851&quot;
## [1] &quot;28 30.4125238868985&quot;
## [1] &quot;28 31.2457927359468&quot;
## [1] &quot;28 27.0474466984063&quot;
## [1] &quot;28 29.8998008566188&quot;
## [1] &quot;28 25.3858050210433&quot;
## [1] &quot;28 37.2533897226611&quot;
## [1] &quot;28 32.5011138315404&quot;
## [1] &quot;28 29.7057472111577&quot;
## [1] &quot;28 38.1762421890932&quot;
## [1] &quot;28 23.3068258543174&quot;
## [1] &quot;28 24.8940841107707&quot;
## [1] &quot;28 30.6197475186909&quot;
## [1] &quot;28 33.0482636844339&quot;
## [1] &quot;28 41.9580615219501&quot;
## [1] &quot;28 25.5997892809424&quot;
## [1] &quot;28 28.0969863024705&quot;
## [1] &quot;26 31.4984648926975&quot;
## [1] &quot;26 22.2323961265296&quot;
## [1] &quot;26 22.4724079830695&quot;
## [1] &quot;26 33.6370095153399&quot;
## [1] &quot;26 28.0820764401776&quot;
## [1] &quot;26 29.8922899210089&quot;
## [1] &quot;26 32.0900458849051&quot;
## [1] &quot;26 24.6467127225572&quot;
## [1] &quot;26 22.4716468603646&quot;
## [1] &quot;26 18.8540278776693&quot;
## [1] &quot;26 20.9678819792938&quot;
## [1] &quot;26 27.0350986457573&quot;
## [1] &quot;26 27.8347255288477&quot;
## [1] &quot;26 27.8508073252441&quot;
## [1] &quot;26 24.3152040453772&quot;
## [1] &quot;26 30.9250360596949&quot;
## [1] &quot;26 17.5359509281305&quot;
## [1] &quot;26 28.7091019723863&quot;
## [1] &quot;26 18.2597223087801&quot;
## [1] &quot;26 24.3543267247532&quot;
## [1] &quot;26 29.4324140557672&quot;
## [1] &quot;26 24.2346416113778&quot;
## [1] &quot;26 23.4424575408901&quot;
## [1] &quot;26 24.4322302492847&quot;
## [1] &quot;27 26.8523024981171&quot;
## [1] &quot;27 30.9504586746643&quot;
## [1] &quot;27 27.3565784095583&quot;
## [1] &quot;27 28.6070473999359&quot;
## [1] &quot;27 25.9648029953041&quot;
## [1] &quot;27 28.2756818031069&quot;
## [1] &quot;27 24.6162430326165&quot;
## [1] &quot;27 32.6958341483209&quot;
## [1] &quot;27 26.5179341414111&quot;
## [1] &quot;27 23.5248597529495&quot;
## [1] &quot;27 27.2833580136309&quot;
## [1] &quot;27 27.2297872704281&quot;
## [1] &quot;27 25.7580499587533&quot;
## [1] &quot;27 31.4286225576837&quot;
## [1] &quot;27 34.2361914711913&quot;
## [1] &quot;27 36.6604185008655&quot;
## [1] &quot;27 27.2233833161354&quot;
## [1] &quot;27 31.3058771580229&quot;
## [1] &quot;27 29.7284694765333&quot;
## [1] &quot;27 25.5255235826245&quot;
## [1] &quot;27 23.0998223225983&quot;
## [1] &quot;27 32.4111726842311&quot;
## [1] &quot;27 22.1274728170564&quot;
## [1] &quot;27 24.2311084437878&quot;</code></pre>
<p>Here at each <code>Hour</code> we use the <code>rnorm()</code> function to generate <code>1</code> random Gaussian sample with a mean of <code>Daily_T</code> and a standard deviation of <code>5</code>.</p>
<p>We notice in the output that when the first index (<code>Daily_T</code>) is set to <code>28</code>, the second index (<code>Hour</code>) iterates through its full set of indices. Once the indices of <code>Hour</code> have been iterated through, then <code>Daily_T</code> moves to the next one (<em>i.e.</em>, <code>27</code>). This process continues until the last index has been used for each <code>for()</code> loop.</p>
<p>Rather than printing the results, we could write the loop output to a new <em>object</em>:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" data-line-number="1">Output_List &lt;-<span class="st"> </span><span class="kw">c</span>()</a>
<a class="sourceLine" id="cb103-2" data-line-number="2"><span class="cf">for</span> (Daily_T <span class="cf">in</span> Forecast_List) {</a>
<a class="sourceLine" id="cb103-3" data-line-number="3">  <span class="cf">for</span> (Hour <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">24</span>) {</a>
<a class="sourceLine" id="cb103-4" data-line-number="4">    Hourly_T    &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1</span>,Daily_T,<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb103-5" data-line-number="5">    Temp_Value  &lt;-<span class="st"> </span><span class="kw">paste</span>(Daily_T,Hourly_T)</a>
<a class="sourceLine" id="cb103-6" data-line-number="6">    Output_List &lt;-<span class="st"> </span><span class="kw">c</span>(Output_List, Temp_Value)</a>
<a class="sourceLine" id="cb103-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb103-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb103-9" data-line-number="9"></a>
<a class="sourceLine" id="cb103-10" data-line-number="10"><span class="kw">print</span>(Output_List)</a></code></pre></div>
<pre><code>##   [1] &quot;28 26.4427202845768&quot; &quot;28 25.1932794253318&quot; &quot;28 25.9354516750256&quot; &quot;28 21.602872609549&quot;  &quot;28 29.0412643094825&quot;
##   [6] &quot;28 33.5575461662161&quot; &quot;28 21.1460746922992&quot; &quot;28 25.4215288088379&quot; &quot;28 36.1586567768635&quot; &quot;28 20.8192237582303&quot;
##  [11] &quot;28 26.4438382250003&quot; &quot;28 33.9228708466462&quot; &quot;28 25.6649908557955&quot; &quot;28 28.9456400122421&quot; &quot;28 27.5511765989694&quot;
##  [16] &quot;28 30.2750252578332&quot; &quot;28 20.3367993395511&quot; &quot;28 23.1550124602624&quot; &quot;28 23.2490990200394&quot; &quot;28 21.6867909222147&quot;
##  [21] &quot;28 20.9502685974503&quot; &quot;28 27.3310414173515&quot; &quot;28 28.5867478477099&quot; &quot;28 28.9374668408561&quot; &quot;27 25.1219924313745&quot;
##  [26] &quot;27 38.092685530488&quot;  &quot;27 27.6648396414727&quot; &quot;27 28.8599912740082&quot; &quot;27 29.0601961266558&quot; &quot;27 20.5880067816571&quot;
##  [31] &quot;27 21.4359154842149&quot; &quot;27 31.1291295437711&quot; &quot;27 30.0280451478829&quot; &quot;27 24.9842751863676&quot; &quot;27 21.9647857555197&quot;
##  [36] &quot;27 34.9696427609204&quot; &quot;27 25.8614972352158&quot; &quot;27 21.4823365769379&quot; &quot;27 29.6677526150511&quot; &quot;27 22.356755506144&quot; 
##  [41] &quot;27 16.935668687483&quot;  &quot;27 33.565532957677&quot;  &quot;27 35.096975499667&quot;  &quot;27 24.7131522985893&quot; &quot;27 23.3174608080132&quot;
##  [46] &quot;27 31.7347760570291&quot; &quot;27 29.2351385524492&quot; &quot;27 22.2667246597754&quot; &quot;28 20.3348494978983&quot; &quot;28 19.5832705275884&quot;
##  [51] &quot;28 33.2513941492281&quot; &quot;28 27.3983547959543&quot; &quot;28 28.3042290230611&quot; &quot;28 24.0830090408228&quot; &quot;28 27.0432945911707&quot;
##  [56] &quot;28 23.1209093478376&quot; &quot;28 14.0115706906388&quot; &quot;28 26.4519691023371&quot; &quot;28 33.2362660898848&quot; &quot;28 32.7988446353685&quot;
##  [61] &quot;28 34.5289845259369&quot; &quot;28 27.6131697370833&quot; &quot;28 17.5923727989264&quot; &quot;28 33.0543137536862&quot; &quot;28 21.7546855121388&quot;
##  [66] &quot;28 25.3129247969988&quot; &quot;28 26.8802514728112&quot; &quot;28 28.6705526979532&quot; &quot;28 30.3151337788223&quot; &quot;28 24.970559189113&quot; 
##  [71] &quot;28 24.1227094161539&quot; &quot;28 25.8618931512105&quot; &quot;26 26.9657203306223&quot; &quot;26 28.8466146016303&quot; &quot;26 28.0912962124611&quot;
##  [76] &quot;26 28.1716779571549&quot; &quot;26 29.9748042522092&quot; &quot;26 25.8672824483202&quot; &quot;26 19.0917123545459&quot; &quot;26 26.8556511323719&quot;
##  [81] &quot;26 27.696718124653&quot;  &quot;26 21.9136489441768&quot; &quot;26 25.6873328500992&quot; &quot;26 28.9013064462357&quot; &quot;26 24.5141483314985&quot;
##  [86] &quot;26 25.9069893705871&quot; &quot;26 28.8693878580018&quot; &quot;26 29.2825584942243&quot; &quot;26 30.1100390067706&quot; &quot;26 28.7614734584124&quot;
##  [91] &quot;26 28.1215733525481&quot; &quot;26 26.248977101395&quot;  &quot;26 18.1596666882851&quot; &quot;26 27.7697254283566&quot; &quot;26 29.7915046309143&quot;
##  [96] &quot;26 27.7525888927242&quot; &quot;27 29.1144063688496&quot; &quot;27 31.2339791347178&quot; &quot;27 33.9948476651893&quot; &quot;27 28.8143142003271&quot;
## [101] &quot;27 30.8504833966501&quot; &quot;27 27.9951456950147&quot; &quot;27 28.4889002597025&quot; &quot;27 33.5846252150162&quot; &quot;27 28.8321476167292&quot;
## [106] &quot;27 31.7359461199658&quot; &quot;27 26.7978676004861&quot; &quot;27 28.094161388721&quot;  &quot;27 40.0665301815878&quot; &quot;27 30.3133609979048&quot;
## [111] &quot;27 14.8737218940524&quot; &quot;27 28.7534191463767&quot; &quot;27 28.0084127373747&quot; &quot;27 24.9001469605503&quot; &quot;27 29.5065338465209&quot;
## [116] &quot;27 28.8159945470972&quot; &quot;27 27.7101776837779&quot; &quot;27 32.5623657496428&quot; &quot;27 30.1172947578786&quot; &quot;27 20.9165426860899&quot;</code></pre>
<p>This approach can be useful, but “growing your results” (building the result object incrementally) is <strong>computationally inefficient</strong>, so avoid it when you are iterating through a lot of values.</p>
<p><strong>Important</strong>: One of the biggest things that trips up novices and experienced R users alike, is building a results object (<em>vector</em>, <em>list</em>, <em>matrix</em>, <em>data frame</em>) as your for loop progresses. Computers are very bad at handling this, so your calculations can very quickly slow to a crawl. It’s much better to define an <strong>empty results object</strong> beforehand of appropriate dimensions, rather than initializing an empty object without dimensions. So if you know the end result will be stored in a matrix-like above, create an empty matrix with <code>5</code> row and <code>24</code> columns, then at each iteration stores the results in the appropriate location.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" data-line-number="1">Output_Matrix    &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">nrow=</span><span class="dv">5</span>, <span class="dt">ncol=</span><span class="dv">24</span>)</a>
<a class="sourceLine" id="cb105-2" data-line-number="2"><span class="cf">for</span> (Day <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</a>
<a class="sourceLine" id="cb105-3" data-line-number="3">  Daily_T        &lt;-<span class="st"> </span>Forecast_List[Day]</a>
<a class="sourceLine" id="cb105-4" data-line-number="4">  <span class="cf">for</span> (Hour <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">24</span>) {</a>
<a class="sourceLine" id="cb105-5" data-line-number="5">    Hourly_T     &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1</span>,Daily_T,<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb105-6" data-line-number="6">    Temp_Value   &lt;-<span class="st"> </span><span class="kw">paste</span>(Daily_T,Hourly_T)</a>
<a class="sourceLine" id="cb105-7" data-line-number="7">    Output_Matrix[Day, Hour] &lt;-<span class="st"> </span>Temp_Value</a>
<a class="sourceLine" id="cb105-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb105-9" data-line-number="9">}</a>
<a class="sourceLine" id="cb105-10" data-line-number="10">Output_Matrix2 &lt;-<span class="st"> </span><span class="kw">as.vector</span>(Output_Matrix)</a>
<a class="sourceLine" id="cb105-11" data-line-number="11">Output_Matrix2</a></code></pre></div>
<pre><code>##   [1] &quot;28 22.0675787661647&quot; &quot;27 25.1993522593063&quot; &quot;28 30.9368377313005&quot; &quot;26 20.4556993116884&quot; &quot;27 26.2548417549408&quot;
##   [6] &quot;28 23.8852592944834&quot; &quot;27 24.0361908757722&quot; &quot;28 37.3343826325444&quot; &quot;26 21.262234143191&quot;  &quot;27 17.0554182098351&quot;
##  [11] &quot;28 25.1376556812229&quot; &quot;27 28.2870216442011&quot; &quot;28 23.9671176328712&quot; &quot;26 26.6676529767651&quot; &quot;27 19.617138213787&quot; 
##  [16] &quot;28 32.296283552169&quot;  &quot;27 21.3237630906349&quot; &quot;28 27.2455461274594&quot; &quot;26 28.2602945471816&quot; &quot;27 28.0173376259789&quot;
##  [21] &quot;28 30.0062950113295&quot; &quot;27 28.8896849352228&quot; &quot;28 28.5343489164407&quot; &quot;26 19.7171429892977&quot; &quot;27 34.6734863458587&quot;
##  [26] &quot;28 31.4836981922935&quot; &quot;27 22.1970740533604&quot; &quot;28 21.2835047183105&quot; &quot;26 27.5487471330481&quot; &quot;27 23.9186168887805&quot;
##  [31] &quot;28 26.5848849051966&quot; &quot;27 28.6565549935554&quot; &quot;28 27.0227308970133&quot; &quot;26 27.3623528335725&quot; &quot;27 26.4206784195081&quot;
##  [36] &quot;28 30.418418906539&quot;  &quot;27 26.0251403687005&quot; &quot;28 32.1522073216111&quot; &quot;26 25.4056640124303&quot; &quot;27 27.230221371465&quot; 
##  [41] &quot;28 31.3015638655991&quot; &quot;27 30.7603657022349&quot; &quot;28 30.0869812297356&quot; &quot;26 18.9736441192292&quot; &quot;27 25.1262885678228&quot;
##  [46] &quot;28 26.6905710467537&quot; &quot;27 28.3218721114888&quot; &quot;28 22.3338230384224&quot; &quot;26 34.3503450808516&quot; &quot;27 23.2297280306962&quot;
##  [51] &quot;28 31.724850062789&quot;  &quot;27 26.7784987260862&quot; &quot;28 20.3095788565615&quot; &quot;26 20.1278527306101&quot; &quot;27 21.5301668889767&quot;
##  [56] &quot;28 23.5865478337074&quot; &quot;27 29.9529705513069&quot; &quot;28 24.1336633491453&quot; &quot;26 29.8605156691024&quot; &quot;27 29.7891470446378&quot;
##  [61] &quot;28 25.2885255564261&quot; &quot;27 23.6853868610775&quot; &quot;28 29.137588485075&quot;  &quot;26 29.9670727932187&quot; &quot;27 24.0795350802509&quot;
##  [66] &quot;28 26.6278944434549&quot; &quot;27 34.4839376951007&quot; &quot;28 24.8109975482751&quot; &quot;26 28.7821759559077&quot; &quot;27 37.1993667430022&quot;
##  [71] &quot;28 30.2631973857986&quot; &quot;27 31.4812466192458&quot; &quot;28 30.6156966774566&quot; &quot;26 21.2753842823227&quot; &quot;27 25.3242590724358&quot;
##  [76] &quot;28 24.0916194661701&quot; &quot;27 27.7967878528445&quot; &quot;28 25.2571846975843&quot; &quot;26 29.0875521553317&quot; &quot;27 33.6550288242277&quot;
##  [81] &quot;28 37.7479540377571&quot; &quot;27 24.4626361236658&quot; &quot;28 29.3386213216385&quot; &quot;26 28.5197818353642&quot; &quot;27 30.2789649790046&quot;
##  [86] &quot;28 30.6907407810816&quot; &quot;27 28.4555310632887&quot; &quot;28 32.2954058689985&quot; &quot;26 25.2835165160097&quot; &quot;27 23.2600751191046&quot;
##  [91] &quot;28 30.4049683621083&quot; &quot;27 41.0300459982749&quot; &quot;28 28.6212809760673&quot; &quot;26 30.4310816209197&quot; &quot;27 21.1915056084427&quot;
##  [96] &quot;28 25.9301111581633&quot; &quot;27 23.8616001213217&quot; &quot;28 37.0867783547683&quot; &quot;26 22.0962557512766&quot; &quot;27 29.6807815852403&quot;
## [101] &quot;28 20.4104740969808&quot; &quot;27 29.8349443224417&quot; &quot;28 38.8122553871086&quot; &quot;26 33.0610344355367&quot; &quot;27 23.9395465929682&quot;
## [106] &quot;28 34.9140782013631&quot; &quot;27 18.8079625381276&quot; &quot;28 27.2496247000423&quot; &quot;26 24.9928070489637&quot; &quot;27 28.5389496543067&quot;
## [111] &quot;28 35.8865842561203&quot; &quot;27 23.4748675032103&quot; &quot;28 23.1955279809548&quot; &quot;26 20.218565646625&quot;  &quot;27 23.7450586801667&quot;
## [116] &quot;28 18.1793862791538&quot; &quot;27 31.2002076633815&quot; &quot;28 23.9940947847173&quot; &quot;26 28.2430953824169&quot; &quot;27 23.6940860223256&quot;</code></pre>
<p>Here we use <code>matrix()</code> to create an empty matrix with <code>5</code> rows and <code>24</code> columns, and use <code>as.vector()</code> to convert the <code>5x24</code> matrix into a vector with a length of <code>120</code>.</p>
<p>Sometimes you will find yourself needing to repeat an operation as long as a certain condition is met. You can do this with a <code>while()</code> loop.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" data-line-number="1">z &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb107-2" data-line-number="2"><span class="cf">while</span>(z <span class="op">&lt;=</span><span class="st"> </span><span class="dv">5</span>){ <span class="co"># While this condition is TRUE</span></a>
<a class="sourceLine" id="cb107-3" data-line-number="3">  <span class="co"># Do following</span></a>
<a class="sourceLine" id="cb107-4" data-line-number="4">  z &lt;-<span class="st"> </span>z <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb107-5" data-line-number="5">  <span class="kw">print</span>(z)</a>
<a class="sourceLine" id="cb107-6" data-line-number="6">} <span class="co"># End of the while loop</span></a></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6</code></pre>
<p>OK, can you figure out why the number <code>6</code> is also printed?</p>
<p><code>while()</code> loops will <strong>not</strong> always be appropriate. You have to be <strong>particularly careful</strong> that you don’t end up stuck in an infinite loop because your condition is always met, and hence the while statement never terminates.</p>
</div>
<div id="r-packages" class="section level2">
<h2>R Packages</h2>
<p>It is possible to add functions to R by writing a <em>package</em> or by obtaining a package written by someone else. As of this writing, there are over 16,000 packages available on CRAN (the comprehensive R archive network). RStudio has functionality for managing packages. You can:</p>
<ul>
<li>See what packages are installed by typing <code>installed.packages()</code></li>
<li>Install packages by typing <code>install.packages(&quot;packagename&quot;)</code>, where <code>packagename</code> is the package name, in quotes.</li>
<li>Update installed packages by typing <code>update.packages()</code></li>
<li>Remove a package with <code>remove.packages(&quot;packagename&quot;)</code></li>
<li>Make a package available for use with <code>library(packagename)</code>, no quotes.</li>
</ul>
<p>Packages can also be viewed, loaded, and detached in the Packages tab of the lower-right panel in RStudio.</p>
<p><img src="figs/packages.jpg" alt="drawing" width="800"/></p>
<p>Clicking on this tab will display all of the installed packages with a checkbox next to them. If the box next to a package name is checked, the package is loaded, and if it is empty, the package is not loaded. Click an empty box to load that package and click a checked box to detach that package.</p>
<p>Packages can be installed and updated from the Package tab with the Install and Update buttons at the top of the tab.</p>
</div>
<div id="working-directory" class="section level2">
<h2>Working directory</h2>
<p>If you want to read files from a specific location or write files to a specific location, you need to set <em>working directory</em> in R. This can be accomplished by specifying path with <code>setwd()</code> function. First, let’s check the working directory using <code>getwd()</code>.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" data-line-number="1"><span class="co"># Get current working directory in R</span></a>
<a class="sourceLine" id="cb109-2" data-line-number="2"><span class="kw">getwd</span>()</a></code></pre></div>
<p>You can change the working directory using <code>setwd()</code>:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" data-line-number="1"><span class="co"># Set working directory</span></a>
<a class="sourceLine" id="cb110-2" data-line-number="2"><span class="kw">setwd</span>(<span class="st">&quot;/data/ese5023&quot;</span>)</a></code></pre></div>
<p>Or you may use RStudio through GUI - click <code>Session</code> then <code>Set Working Directory</code>, followed by <code>Choose Directory</code>.</p>
</div>
<div id="seeking-help" class="section level2">
<h2>Seeking Help</h2>
<p><strong>Reading Help files</strong></p>
<p>R, and every package, provide help files for functions. The general syntax to search for help on any function, “function_name”, from a specific function that is in a package loaded into your namespace (your interactive R session):</p>
<p><code>?function_name</code> or <code>help(function_name)</code></p>
<p>This will load up a help page in RStudio.</p>
<p><strong>Special Operators</strong></p>
<p>To seek help on special operators, use quotes: <code>?&quot;&gt;=&quot;</code></p>
<p><strong>When you have no idea where to begin</strong></p>
<p>If you don’t know what function or package you need to use <a href="https://cran.r-project.org/web/views/">CRAN Task Views</a> is a specially maintained list of packages grouped into fields. This can be a good starting point.</p>
<p><strong>When your code doesn’t work: seeking help from your peers</strong></p>
<p>If you’re having trouble using a function, 9 times out of 10, the answers you are seeking have <strong><em>already been answered</em></strong> on <a href="https://stackoverflow.com/">Stack Overflow</a>. You can search using the <code>[r]</code> tag.</p>
<hr />
</div>
</div>
<div id="in-class-exercises" class="section level1">
<h1>In-class exercises</h1>
<div id="exercise-1" class="section level2">
<h2>Exercise #1</h2>
<ul>
<li>Creat a folder named <code>ESE5023</code>
<ul>
<li>Windows: In <code>C:\</code> or <code>D:\</code> disk</li>
<li>macOS: In <code>/home/</code></li>
</ul></li>
<li>Change RStudio <code>Working directory</code> to the above folder</li>
</ul>
</div>
<div id="exercise-2" class="section level2">
<h2>Exercise #2</h2>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" data-line-number="1">X1  &lt;-<span class="st"> </span><span class="dv">50</span></a>
<a class="sourceLine" id="cb111-2" data-line-number="2">X2  &lt;-<span class="st"> </span><span class="dv">120</span></a>
<a class="sourceLine" id="cb111-3" data-line-number="3">X3  &lt;-<span class="st"> </span>X2 <span class="op">*</span><span class="st"> </span><span class="fl">2.0</span></a>
<a class="sourceLine" id="cb111-4" data-line-number="4">X4  &lt;-<span class="st"> </span>X1 <span class="op">-</span><span class="st"> </span><span class="dv">20</span></a>
<a class="sourceLine" id="cb111-5" data-line-number="5">X5  &lt;-<span class="st"> </span>X1 <span class="op">&gt;</span><span class="st"> </span>X2</a></code></pre></div>
<p>What will be the value of each variable after each statement in the program?</p>
<ul>
<li>Now type the above codes in <strong>Console</strong>, check your results.<br />
</li>
<li>Write a command to compare <code>X3</code> to <code>X4</code>. Which one is larger?</li>
<li>Clean up your working environment by deleting the <code>X1</code>, <code>X2</code>, and <code>X3</code> variables.</li>
</ul>
</div>
<div id="exercise-3" class="section level2">
<h2>Exercise #3</h2>
<p>A <a href="https://www.programiz.com/article/flowchart-programming">Flowchart</a> is a diagrammatic representation of an algorithm. It can be helpful for both writing programs and explaining the program to others. A Flowchart is very useful in programming, as it explains a process clearly through symbols and text. Moreover, a flowchart gives you the gist of the process flow in a single glance. Here we begin to learn the flowchart with <code>if</code> and <code>else</code> in R.</p>
<p>Open a new R script (File -&gt; New File -&gt; R Script). Type the following lines in the script, and save it.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" data-line-number="1"><span class="co"># Using runif() function to generate one random value between 0 and 100</span></a>
<a class="sourceLine" id="cb112-2" data-line-number="2">Score  &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb112-3" data-line-number="3"><span class="kw">print</span>(Score)</a>
<a class="sourceLine" id="cb112-4" data-line-number="4"><span class="cf">if</span> (Score <span class="op">&gt;=</span><span class="st"> </span><span class="dv">90</span>) {</a>
<a class="sourceLine" id="cb112-5" data-line-number="5">  <span class="kw">print</span>(<span class="st">&quot;Excellent&quot;</span>) </a>
<a class="sourceLine" id="cb112-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (Score <span class="op">&gt;=</span><span class="st"> </span><span class="dv">60</span>){</a>
<a class="sourceLine" id="cb112-7" data-line-number="7">  <span class="kw">print</span>(<span class="st">&quot;Pass&quot;</span>)</a>
<a class="sourceLine" id="cb112-8" data-line-number="8">} <span class="cf">else</span>{</a>
<a class="sourceLine" id="cb112-9" data-line-number="9">  <span class="kw">print</span>(<span class="st">&quot;Fail&quot;</span>)</a>
<a class="sourceLine" id="cb112-10" data-line-number="10">}  </a></code></pre></div>
<ul>
<li>Selecting all the lines, and then run the script using <code>Ctrl</code>+<code>Enter</code>, what is your result in <strong>Console</strong>?</li>
</ul>
<p>Here <code>Score</code> is randomly generated using <code>runif()</code> function. Type <code>?runif()</code> for help. <code>1</code> means we draw one value from the sample, <code>0</code> and <code>100</code> mean the sample is uniformly distributed between zero and one hundred.</p>
<p>You can play with this script a few times to get different outputs.</p>
<ul>
<li><p>Draw a flow chart based on this script.</p></li>
<li><p>Update your script to reflect the following flowchart <a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p></li>
</ul>
<p><img src="figs/Score.png" alt="drawing" width="600"/></p>
</div>
<div id="exercise-4" class="section level2">
<h2>Exercise #4</h2>
<p>Type the following lines in your script:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" data-line-number="1">TotalStudents &lt;-<span class="st"> </span><span class="dv">40</span></a>
<a class="sourceLine" id="cb113-2" data-line-number="2">Score         &lt;-<span class="st"> </span><span class="kw">runif</span>(TotalStudents,<span class="dv">0</span>,<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb113-3" data-line-number="3">PassStudents  &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb113-4" data-line-number="4"><span class="cf">for</span> (Whatever <span class="cf">in</span> Score) {</a>
<a class="sourceLine" id="cb113-5" data-line-number="5">  <span class="cf">if</span>(Whatever <span class="op">&gt;=</span><span class="st"> </span><span class="dv">60</span>){</a>
<a class="sourceLine" id="cb113-6" data-line-number="6">    PassStudents &lt;-<span class="st"> </span>PassStudents <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb113-7" data-line-number="7">  } </a>
<a class="sourceLine" id="cb113-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb113-9" data-line-number="9"><span class="kw">print</span>(<span class="st">&quot;How many students pass:&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;How many students pass:&quot;</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" data-line-number="1"><span class="kw">print</span>(PassStudents)</a></code></pre></div>
<pre><code>## [1] 18</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" data-line-number="1"><span class="kw">print</span>(<span class="st">&quot;Pass ratio is:&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Pass ratio is:&quot;</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb119-1" data-line-number="1"><span class="kw">print</span>(PassStudents<span class="op">/</span>TotalStudents)</a></code></pre></div>
<pre><code>## [1] 0.45</code></pre>
<ul>
<li>Can you explain what this script does? Use the following flowchart <a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a> for help.</li>
</ul>
<p><img src="figs/for_loop.jpg" alt="drawing" width="200"/></p>
<ul>
<li>Update your script to count:
<ul>
<li>how many student have a score higher than 90</li>
<li>how many student have a score lower than 30</li>
</ul></li>
</ul>
</div>
<div id="exercise-5" class="section level2">
<h2>Exercise #5</h2>
<ul>
<li><p>Create a function named <code>F2C</code> to convert temperatures in degrees Fahrenheit (<em>F</em>) to Celsius (<em>C</em>) using the equation: <span class="math display">\[C = (F - 32) * 5/9\]</span></p></li>
<li><p>Check output with <em>F</em>=32 and <em>F</em>=100</p></li>
<li><p>Can you create its inverse function <code>C2F</code> to convert temperatures in degrees Celsius (<em>C</em>) to Fahrenheit (<em>F</em>) ?</p></li>
</ul>
</div>
<div id="exercise-6" class="section level2">
<h2>Exercise #6</h2>
<ul>
<li>Install the following packages:
<ul>
<li><code>ggplot2</code></li>
<li><code>plyr</code></li>
<li><code>gapminder</code></li>
<li><code>lubridate</code></li>
</ul></li>
<li><p>Load <code>lubridate</code> package by typing <code>library(lubridate)</code></p></li>
<li><p>Check date of today with <code>today()</code> function in <code>lubridate</code> package.</p></li>
</ul>
<hr />
</div>
</div>
<div id="further-reading" class="section level1">
<h1>Further reading</h1>
<ul>
<li><a href="https://cran.r-project.org/doc/contrib/Short-refcard.pdf">R Reference Card</a></li>
<li><a href="https://dss.princeton.edu/training/RStudio101.pdf">Introduction to RStudio</a></li>
<li><a href="http://swcarpentry.github.io/r-novice-gapminder/">R for Reproducible Scientific Analysis</a></li>
<li><a href="http://swcarpentry.github.io/r-novice-inflammation/">Programming with R</a></li>
<li><a href="http://www.r-tutor.com/r-introduction">R Introduction</a></li>
<li><a href="https://www.statmethods.net/r-tutorial/index.html">R Tutorial For Beginners - Quick-R</a></li>
</ul>
</div>
<div id="references" class="section level1">
<h1>References</h1>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p><a href="https://www.burns-stat.com/documents/tutorials/why-use-the-r-language/">Why use the R Language?</a><a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p><a href="https://www.r-bloggers.com/why-use-r/">Why Use R?</a><a href="#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p><a href="https://www.guru99.com/r-vs-python.html">R Vs Python: What’s the Difference?</a><a href="#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p><a href="https://www.gapintelligence.com/system/pictures/568/content_why-learn-r1.jpg">Source</a><a href="#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p><a href="https://www.edrawsoft.com/program-flowchart.html?_ga=2.236753857.159447294.1599375959-170019789.1599375959">Source</a><a href="#fnref5" class="footnote-back">↩</a></p></li>
<li id="fn6"><p><a href="https://www.datamentor.io/r-programming/for-loop/#:~:text=%20R%20for%20Loop%20%201%20Syntax%20of,In%20the%20above%20example%2C%20the%20loop...%20More%20">Source</a><a href="#fnref6" class="footnote-back">↩</a></p></li>
</ol>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = false;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
